<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>添加指南</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<!-- 修改1：把href里的路径换成自己的 -->
		<link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
		 
		<style>
			/* 为带有require类的元素添加红色星号前缀 */
			.required::before {
				/* 星号内容 */
				content: "*";
					/* 红色 */
				color: #ff0000;
				/* 与文字保持一点距离 */
				margin-right: 4px;
			/* 星号加粗 */
				font-weight: bold;				
			}
		</style>
	</head>
	<body>
		<!-- 网页标题，这里用fieldset来设置 -->
		<fieldset class="layui-elem-field layui-field-title">
			<!-- 修改2：把“添加用户”换成自己的 -->
			<legend style="font-weight: bold;">添加指南</legend>
		</fieldset>

		<!-- 表单开始，表单要加上样式class="layui-form" -->
		<div class="layui-form">
			<!-- 用户名表单项开始，表单项要加上样式class="layui-form-item" -->
			
			<div class="layui-form-item">
				<label class="layui-form-label required">指南类型</label>
				<div class="layui-input-block">
					<select lay-verify="required">
						<option value="使用教程">使用教程</option>
						<option value="常见问题">常见问题</option>
						<option value="隐私政策">隐私政策</option>
					</select>
				</div>
			</div>
			
			
			<div class="layui-form-item">
				<label class="layui-form-label required">指南书名</label>
				<div class="layui-input-block">
					<input type="text" id="phone" name="phone" lay-verify="required" lay-reqtext="书名不能为空"
						placeholder="请输入指南书名" value="" class="layui-input">
				</div>
			</div>

			<!-- 文本域开始 -->
			<div class="layui-form-item">
				<label class="layui-form-label">备注</label>
				<div class="layui-input-block">
					<textarea   name="remark" class="layui-textarea" placeholder="请输入备注信息"></textarea>
				</div>
			</div> <!-- 文本域结束 -->
			
			<div class="layui-upload-drag" style="display: block;" id="ID-upload-demo-drag">
			  <i class="layui-icon layui-icon-upload"></i> 
			  <div>支持上传证据资料</div>
			  <div class="layui-hide" id="ID-upload-demo-preview">
			    <hr> <img src="" alt="上传成功后渲染" style="max-width: 100%">
			  </div>
			</div>

			<!-- 提交按钮 -->
			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">确认保存</button>
				</div>
			</div><!-- 提交按钮结束 -->

		</div>
		<!--表单结束-->

		<!-- 修改3：把路径换成自己的 -->
		<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
		<script>
			layui.use(['form', 'layer'], function() {
				var form = layui.form; // 获得form模块
				var layer = layui.layer; // 获得layer模块
				$ = layui.$; // 获得jQuery中的$
				//监听表单提交：确认保存按钮，提交按钮的lay-filter="saveBtn"
				form.on('submit(saveBtn)', function(data) {
					var index = layer.alert(JSON.stringify(data.field), {
						title: '最终的提交信息'
					}, function() {
						// 关闭弹出层
						layer.close(index);

						var iframeIndex = parent.layer.getFrameIndex(window.name);
						parent.layer.close(iframeIndex);

					});
					return false;
				});

			});
			
			layui.use(function(){
			  var upload = layui.upload;
			  var $ = layui.$;
			  // 渲染
			  upload.render({
			    elem: '#ID-upload-demo-drag',
			    url: 'api/upload.json', // 实际使用时改成您自己的上传接口即可。
			    done: function(res){
			      layer.msg('上传成功');
			      $('#ID-upload-demo-preview').removeClass('layui-hide')
			      .find('img').attr('src', res.files.file);
			      console.log(res)
			    }
			  });
			});
		</script>
	</body>
</html>
