<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>案件详情</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- 引入Layui样式（路径需与项目一致） -->
    <link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="../css/layuimini.css" media="all">
</head>
<body>
<div class="layui-container" style="margin-top: 20px;">
    <div class="layui-card">
        <div class="layui-card-header">案件详情</div>
        <div class="layui-card-body">
            <form class="layui-form" lay-filter="caseDetailForm">
                <!-- 案件时间 -->
                <div class="layui-form-item">
                    <label class="layui-form-label">案件时间</label>
                    <div class="layui-input-block">
                        <input type="text" name="year" autocomplete="off" class="layui-input" readonly>
                    </div>
                </div>
                <!-- 案件类型 -->
                <div class="layui-form-item">
                    <label class="layui-form-label">案件类型</label>
                    <div class="layui-input-block">
                        <input type="text" name="deptname" autocomplete="off" class="layui-input" readonly>
                    </div>
                </div>
                <!-- 案件进度 -->
                <div class="layui-form-item">
                    <label class="layui-form-label">案件进度</label>
                    <div class="layui-input-block">
                        <input type="text" name="majorname" autocomplete="off" class="layui-input" readonly>
                    </div>
                </div>
                <!-- 负责律师 -->
                <div class="layui-form-item">
                    <label class="layui-form-label">负责律师</label>
                    <div class="layui-input-block">
                        <input type="text" name="classname" autocomplete="off" class="layui-input" readonly>
                    </div>
                </div>
                <!-- 案件描述（模拟详情字段） -->
                <div class="layui-form-item">
                    <label class="layui-form-label">案件描述</label>
                    <div class="layui-input-block">
                        <textarea name="description" class="layui-textarea" readonly></textarea>
                    </div>
                </div>
                <!-- 关闭按钮 -->
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button type="button" class="layui-btn" id="closeBtn">关闭</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 引入Layui核心JS（路径需与项目一致） -->
<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script>
    // 工具函数：从URL中提取“案件时间”参数
    function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        return r ? decodeURIComponent(r[2]) : null;
    }
    var caseDate = getUrlParam('caseDate'); // 获取URL中的“案件时间”
    
    // 模拟案件详情数据（实际项目需替换为后端接口请求）
    var caseDataList = [
        {
            year: "2025-01-15",
            deptname: "婚姻家庭",
            majorname: "已提交起诉状",
            classname: "张律师",
            description: "原告与被告因离婚财产分割及子女抚养权产生纠纷，已提交起诉状，请求法院依法判决。"
        },
        {
            year: "2025-02-20",
            deptname: "房产纠纷",
            majorname: "法院已立案",
            classname: "李律师",
            description: "委托人购买二手房因卖方违约拒绝过户，提起诉讼后法院已立案，等待开庭。"
        },
        {
            year: "2025-03-10",
            deptname: "劳动仲裁",
            majorname: "待开庭",
            classname: "王律师",
            description: "委托人被公司非法辞退且未获经济补偿，申请劳动仲裁，案件已受理待开庭。"
        },
        {
            year: "2025-04-05",
            deptname: "合同纠纷",
            majorname: "已提交起诉状",
            classname: "赵律师",
            description: "委托人因货物买卖合同纠纷（对方拖欠货款），已提交起诉状要求支付尾款及违约金。"
        },
        {
            year: "2025-05-12",
            deptname: "知识产权",
            majorname: "法院已立案",
            classname: "刘律师",
            description: "委托人商标被非法使用，提起知识产权侵权诉讼后，法院已立案进入审理阶段。"
        },
        {
            year: "2025-06-18",
            deptname: "交通事故",
            majorname: "待开庭",
            classname: "陈律师",
            description: "委托人因交通事故受伤（对方全责），就赔偿金额协商未果，案件已起诉待开庭。"
        },
        {
            year: "2025-07-03",
            deptname: "医疗纠纷",
            majorname: "已提交起诉状",
            classname: "杨律师",
            description: "委托人因医疗过失受伤，与医院协商赔偿无果，已提交起诉状要求赔偿损失。"
        },
        {
            year: "2025-08-25",
            deptname: "婚姻家庭",
            majorname: "法院已立案",
            classname: "黄律师",
            description: "委托人因离婚纠纷（涉及复杂财产分割）起诉后，法院已立案。"
        },
        {
            year: "2025-09-10",
            deptname: "房产纠纷",
            majorname: "待开庭",
            classname: "周律师",
            description: "委托人购买的期房存在质量问题，开发商拒绝整改，起诉后案件待开庭。"
        },
        {
            year: "2025-10-01",
            deptname: "劳动仲裁",
            majorname: "已提交起诉状",
            classname: "吴律师",
            description: "委托人因公司拖欠工资，已申请劳动仲裁并提交相关材料。"
        }
    ];
    
    // 根据“案件时间”查找案件详情
    function getCaseByDate(date) {
        for (var i = 0; i < caseDataList.length; i++) {
            if (caseDataList[i].year === date) {
                return caseDataList[i];
            }
        }
        return null;
    }
    
    layui.use(['form'], function(){
        var form = layui.form;
        var caseInfo = getCaseByDate(caseDate); // 根据案件时间匹配数据
        
        if (caseInfo) {
            // 填充表单数据
            form.val('caseDetailForm', {
                "year": caseInfo.year,
                "deptname": caseInfo.deptname,
                "majorname": caseInfo.majorname,
                "classname": caseInfo.classname,
                "description": caseInfo.description
            });
        } else {
            layer.msg('未找到该案件信息', {icon: 5}); // 若未找到，提示错误
        }
        
        // 关闭弹窗逻辑
        document.getElementById('closeBtn').onclick = function(){
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
        }
    });
</script>
</body>
</html>